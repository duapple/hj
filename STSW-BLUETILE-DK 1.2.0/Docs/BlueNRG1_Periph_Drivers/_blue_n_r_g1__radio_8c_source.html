<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-1,2 Peripherals drivers APIs: BlueNRG1_radio.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-1,2 Peripherals drivers APIs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BlueNRG1_radio.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_blue_n_r_g1__radio_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/* Includes ------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_blue_n_r_g1__radio_8h.html">BlueNRG1_radio.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="group___radio___t_x_r_x___delay___constants.html#ga3f3816567a2f513dd0e1f9eb17992fb2">   55</a></span>&#160;<span class="preprocessor">#define TX_DELAY     0x09</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="group___radio___t_x_r_x___delay___constants.html#ga6179315242df04e1116a135dfa151de0">   56</a></span>&#160;<span class="preprocessor">#define TX_DELAY1    0x09</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="group___radio___t_x_r_x___delay___constants.html#gac55a27e4c3eae59bb1687eb7e8d1fe4b">   57</a></span>&#160;<span class="preprocessor">#define RX_DELAY     0x05</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="group___radio___t_x_r_x___delay___constants.html#gaee0e5b7d3d70c9c55086ec41a8eff72a">   58</a></span>&#160;<span class="preprocessor">#define RX_DELAY1    0x05</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="group___radio___t_x_r_x___delay___constants.html#ga5eed179c4389d133444ae64e35559735">   60</a></span>&#160;<span class="preprocessor">#define ANALOG_OFFSET 0x00</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga380d1d6d08ac615b3e02d023d2bd72dd">   65</a></span>&#160;<span class="preprocessor">#define LS_CRYSTAL_PERIOD   (0X00190000) // Default period for 32768 Hz Crystal</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gae1fce04f69ce00bbbc086f36d7627a3c">   66</a></span>&#160;<span class="preprocessor">#define LS_CRYSTAL_FREQ     (0x0028F5C2) // Default frequency for 32768 Hz Crystal</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/* timeout register offsets and masks */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gabd31aa64d9df6fcf5b08e1068753c0c1">   69</a></span>&#160;<span class="preprocessor">#define OFF_R_DESTINATION    (24)</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gacfe07117d6016b869203727d286a4417">   70</a></span>&#160;<span class="preprocessor">#define OFF_R_SLEEP          (28)</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gafa026a94ecf2eb8c6e586904955f920a">   71</a></span>&#160;<span class="preprocessor">#define MASK_R_TIMEOUT       (0X00ffffff)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/*#define Blue_BIT_PLLTRIG 1</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">#define Blue_BIT_NEXT_TX_MODE 2</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">#define Blue_BIT_SLEEP (1&lt;&lt;2)</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">#define Blue_BIT_NS_EN (1&lt;&lt;3)</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">#define Blue_BIT_INC_CHAN (1&lt;&lt;4)</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">#define Blue_SHIFT_NEXT_MAS (5)*/</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gaa9843950f1f67a29748b62139f0eb8ec">   80</a></span>&#160;<span class="preprocessor">#define Blue_INT_DONE (1)</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga99890d405766555b97583cbc1aa17289">   81</a></span>&#160;<span class="preprocessor">#define Blue_INT_RCV_OK (2)</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gabb6e716325a792ed3bc98e2c2fecd313">   82</a></span>&#160;<span class="preprocessor">#define Blue_INT_CRC_ERR (1&lt;&lt;2)</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga522c52817e992c6a7a3f5a0fa9a86c06">   83</a></span>&#160;<span class="preprocessor">#define Blue_INT_RCV_TRIG (1&lt;&lt;3)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga086ccece5200372612b5ba3688d91d6f">   84</a></span>&#160;<span class="preprocessor">#define Blue_INT_CMD (1&lt;&lt;4)</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga63565fc9d91dc274efbaec4567fcca37">   85</a></span>&#160;<span class="preprocessor">#define Blue_INT_RCVMD (1&lt;&lt;5)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga4e6a22b1c07828c8194fc85838bf05ae">   86</a></span>&#160;<span class="preprocessor">#define Blue_INT_TIMEOUT (1&lt;&lt;6)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gaefd21fb28b3f90d83aac8121458dca57">   87</a></span>&#160;<span class="preprocessor">#define Blue_INT_TX_OK (1&lt;&lt;7)</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga010aab502563eba30d43b1bd83bb3917">   89</a></span>&#160;<span class="preprocessor">#define WAKEUP_TIMER_TRIGGER     0x1000000 </span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gac55d53aba4400688835603f5a48cd9ca">   90</a></span>&#160;<span class="preprocessor">#define TIMER1_TIMER_TRIGGER     0x2000000 </span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga6f119c7f9bb26a55ecff265710463111">   91</a></span>&#160;<span class="preprocessor">#define TIMER2_TIMER_TRIGGER     0x3000000</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga6afabd078b4ecd4738e88ac2e03eb5b5">   93</a></span>&#160;<span class="preprocessor">#define WAKEUP_TIMER_MASK     0x1</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga0e1b36244cb660ca92614cdaf3bc13e9">   94</a></span>&#160;<span class="preprocessor">#define TIMER1_TIMER_MASK     0x2</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga82e5a62a8aeae504b21d5534bb2a3449">   95</a></span>&#160;<span class="preprocessor">#define TIMER2_TIMER_MASK     0x3</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">   97</a></span>&#160;<span class="preprocessor">#define BLUE_SLEEP_ENABLE        0x10000000</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gaeabfcdf8b03e5f8cad34dab9ad616dda">   98</a></span>&#160;<span class="preprocessor">#define BLUE_STANDBY_ENABLE      0x30000000</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">   99</a></span>&#160;<span class="preprocessor">#define TIMER_OFF 0</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gaac59928c53ed50ef03a0e3d28b011593">  100</a></span>&#160;<span class="preprocessor">#define SLEEP_TIME_MIN   (250)</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gaf618f9ccc91389dd3c0c8b75bfcde726">  101</a></span>&#160;<span class="preprocessor">#define NO_DEEP_SLEEP                       (0x97)</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga3ff3561b2910a0eb4ec3a054789aabde">  104</a></span>&#160;<span class="preprocessor">#define IRQSPI                  (SPI_IRQn)</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gabb4868492f074c98ebe79096ec8dac03">  105</a></span>&#160;<span class="preprocessor">#define IRQBLUE                 (BLUE_CTRL_IRQn)</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#ga99ae1fc5a4e71bf8ae9e77e7be558d70">  106</a></span>&#160;<span class="preprocessor">#define IRQNVM                  (NVM_IRQn)</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="group___radio___exported___constants.html#gafcaf55672517d744edf6adf501d1f47a">  108</a></span>&#160;<span class="preprocessor">#define BLE_STATUS_SUCCESS                          (0x00)</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#gae2a4839c8a7daab774258a37e3df89b4">  117</a></span>&#160;<span class="preprocessor">#define DISABLE_INTERRUPT(irqNum)            {NVIC_DisableIRQ(irqNum);}</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#gadc0d0187921522dd10ae16e5166d3d62">  118</a></span>&#160;<span class="preprocessor">#define ENABLE_INTERRUPT(irqNum)             {NVIC_EnableIRQ(irqNum);}</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga88a37a2d5f0cbb9c6c502bc687944ac1">  119</a></span>&#160;<span class="preprocessor">#define BLUE_STRUCT_PTR_CAST(x) (((BlueTransBlueStrctPtr_t)(int)(x)) &amp; 0xffff)</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga08d2939bc3b9cb20c7c8dd88c3f70388">  120</a></span>&#160;<span class="preprocessor">#define BLUE_DATA_PTR_CAST(x) (((BlueTransBlueDataPtr_t)(int)(x)) &amp; 0xffff)</span></div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga688ae1692c44833bfe88c044e6be2fe8">  121</a></span>&#160;<span class="preprocessor">#define TIME24_DIFF(a, b)       (((int32_t)((a - b) &lt;&lt; 8)) &gt;&gt; 8)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">  122</a></span>&#160;<span class="preprocessor">#define IS_STATE_VALID(STATEMACHINE_NO) (STATEMACHINE_NO &lt; STATEMACHINE_COUNT)</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga70bf049d7716553d8662d6350f19eadf">  123</a></span>&#160;<span class="preprocessor">#define IS_POWERLEVEL_VALID(POWER) (POWER &lt; 16)</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga9254a0b2d870516dea400b5896318216">  124</a></span>&#160;<span class="preprocessor">#define IS_RFCHANNEL_VALID(RF_CHANNEL) (RF_CHANNEL &lt;40)</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#gaa3ced72fc096ddb9f07ce99e5c6dafc6">  125</a></span>&#160;<span class="preprocessor">#define GET_CUR_TIME            (MASK_R_TIMEOUT &amp; BLUE_CTRL-&gt;CURRENT_TIME)</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">  126</a></span>&#160;<span class="preprocessor">#define IFR (&amp;(globalParameters.hardware_config) )</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#gaf52e854f55fb7d92917dd2a34d6d4446">  128</a></span>&#160;<span class="preprocessor">#define IS_DELAY_VALID(TIME) ( ((us_time_translate(TIME) - (IFR-&gt;hs_startup_time + (IFR-&gt;hs_startup_time&gt;&gt;2)-(IFR-&gt;hs_startup_time&gt;&gt;4)) - ANALOG_HW_OFFSET)&gt;10) &amp;&amp; \</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">                            ((us_time_translate(TIME) - (IFR-&gt;hs_startup_time + (IFR-&gt;hs_startup_time&gt;&gt;2)-(IFR-&gt;hs_startup_time&gt;&gt;4)) - ANALOG_HW_OFFSET)&lt;(1&lt;&lt;24)))</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga95c8ac582c31dd55944250da123fd563">  132</a></span>&#160;<span class="preprocessor">#define MASK_INTERRUPTS() __disable_irq(); </span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="group___radio___exported___macros.html#ga289116058fd4856caadf5b268e82cc42">  133</a></span>&#160;<span class="preprocessor">#define UNMASK_INTERRUPTS()  __enable_irq();</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> BlueGlob* <span class="keyword">const</span> blueglob = &amp;__blue_RAM.BlueGlobVar; <span class="comment">// (BlueGlob*) BLUEGLOB_BASE;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> BlueGlobPerMaster* <span class="keyword">const</span> bluedata = __blue_RAM.BlueGlobPerMasterVar;<span class="comment">// (BlueGlobPerMaster*) (BLUEGLOB_BASE+12);</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/* volatile uint8_t *testP;*/</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/* glabal variables */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="group___radio___private___variables.html#ga7e533a177c7e5e67d8c5560eaf0bbe72">  150</a></span>&#160;<a class="code" href="struct_radio_global_parameters__t.html">RadioGlobalParameters_t</a> <a class="code" href="group___radio___private___variables.html#ga7e533a177c7e5e67d8c5560eaf0bbe72">globalParameters</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/*ActionPacket dummy_action_packet;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">uint8_t dummy_data[50];*/</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<a class="code" href="group___radio___private___functions.html#gad7de06cdb1d3aeaddf1d529d2ed7b7d1">WEAK_FUNCTION</a>(<span class="keywordtype">void</span> RADIO_TimerOverrunCallback(<span class="keywordtype">void</span>));;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<a class="code" href="group___radio___private___functions.html#gad7de06cdb1d3aeaddf1d529d2ed7b7d1">WEAK_FUNCTION</a>(<span class="keywordtype">void</span> RADIO_HostTimerCallback(<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">static</span> int32_t machine_time_translate(int32_t time)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  int32_t freq_global = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a6e5aeac95bd9b4eb19f47a881a8c7e9e">freq_global_debug</a> ;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  int32_t time1 = (time &gt;&gt; 15) ;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  int32_t time2 = time &amp; 0x7fff ;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  int32_t freq1 = freq_global &gt;&gt; 7 ;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  int32_t result = freq_global*time1 + ((time2 * freq1) &gt;&gt; 8) ;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span>((result + 32) &gt;&gt; 6) ;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">static</span> uint32_t us_time_translate(int32_t time)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">//0.68DB8BAC710CB29</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  uint32_t t1 = time * 0x68;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  uint32_t t2 = time * 0xDB;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">return</span> machine_time_translate( (t1 &gt;&gt; 8) + (t2 &gt;&gt; 16) );<span class="comment">//(time*256)/625);</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> set_freq(int32_t a, int32_t b)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  int32_t freq_global;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  int32_t period_global;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;ls_source != 0) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    int32_t mult = 0x753 ;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    int32_t a1 = a &gt;&gt; 6 ;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    int32_t a2 = a1 * mult ;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    int32_t mul1 = 0x8BCF6 ;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    int32_t b1 = b &gt;&gt; 8 ;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    int32_t b2 = b &amp; 0xff ;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    period_global = ((mul1 * b1) + ((b2 * mul1)&gt;&gt;8) + 16 )&gt;&gt;5 ;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    freq_global = (a2 + 128) &gt;&gt; 8 ;      </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a4feb2d1d5155073bf7fb8da59071e8d6">period_slow_patch</a> = ((b * 1365) &gt;&gt; 16); <span class="comment">/* Divide by 48 */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    freq_global = <a class="code" href="group___radio___exported___constants.html#gae1fce04f69ce00bbbc086f36d7627a3c">LS_CRYSTAL_FREQ</a> ;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    period_global = <a class="code" href="group___radio___exported___constants.html#ga380d1d6d08ac615b3e02d023d2bd72dd">LS_CRYSTAL_PERIOD</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* [EM:] Fix bug #1343</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">    *  save the period_slow value to restore in the ISR</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a4feb2d1d5155073bf7fb8da59071e8d6">period_slow_patch</a> = ((<a class="code" href="group___radio___exported___constants.html#ga380d1d6d08ac615b3e02d023d2bd72dd">LS_CRYSTAL_PERIOD</a>&gt;&gt;6)*1250) &gt;&gt; 16;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  blueglob-&gt;period_slow = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a4feb2d1d5155073bf7fb8da59071e8d6">period_slow_patch</a>;    </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a6e5aeac95bd9b4eb19f47a881a8c7e9e">freq_global_debug</a> = freq_global;   </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#adc7cacd68ff991c747bbeb5db3c81de2">period_global_debug</a> = period_global; <span class="comment">/* not used in current implementation */</span> </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  int32_t time1 = machine_time_translate(<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time) ;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">if</span>(time1 &gt;= 1024)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    time1 = 1023 ;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (time1 &lt; 8)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    time1 = 8;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  blueglob-&gt;wakeup_time_offset = time1 &gt;&gt; 3 ;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> BlueNRG_Start_Crystal_Measurement(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  CKGEN_BLE-&gt;CLK32K_PERIOD = 0;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0fe668fcc510d70104a2c0240ef9ed1f">Clk32Context</a>.<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a10910fc520184f55ece9f48ea1c6aba5">started_flag</a> = 1;    </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keyword">static</span> int32_t read_RSSI(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;{</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">int</span> i = 0 ;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">int</span> rsi_dbm;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">while</span>(i &lt; 100 &amp;&amp; (BLUE_CTRL-&gt;RADIO_CONFIG &amp; 0x10000) != 0)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">//        dump_it = i++;</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    rsi_dbm = i++; <span class="comment">// use rsi_dbm instead of dump_it which is in RAM2</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">int</span> rssi_int16 = ((globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">rssiLevel</a>[0] &gt;&gt; 16) &amp; 0xff00) | (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">rssiLevel</a>[1] &amp; 0xff) ;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">int</span> reg_agc = (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">rssiLevel</a>[0] &gt;&gt; 16) &amp; 0xff ;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">if</span>(rssi_int16 == 0 || reg_agc &gt; 0xb)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    rsi_dbm = 127 ;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    rsi_dbm = reg_agc * 6 -127 ;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">while</span>(rssi_int16 &gt; 30)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      rsi_dbm = rsi_dbm + 6 ;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      rssi_int16 = rssi_int16 &gt;&gt; 1 ;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    rsi_dbm = rsi_dbm + ((417*rssi_int16 + 18080)&gt;&gt;10) ;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">return</span> rsi_dbm ;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">static</span> uint8_t timerSelect(uint32_t wakeupTime)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  int32_t time2 = BLUE_CTRL-&gt;CURRENT_TIME ;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  int32_t timediff = (wakeupTime - time2) &amp; 0xffffff ;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">/* more than 1.2 ms in the future */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span>(timediff &gt; (blueglob-&gt;wakeup_time_offset &lt;&lt; 3) + machine_time_translate(<a class="code" href="group___radio___exported___constants.html#gaac59928c53ed50ef03a0e3d28b011593">SLEEP_TIME_MIN</a>) &amp;&amp; timediff &lt; 0x800000) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___radio___exported___constants.html#gafcaf55672517d744edf6adf501d1f47a">BLE_STATUS_SUCCESS</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___radio___exported___constants.html#gaf618f9ccc91389dd3c0c8b75bfcde726">NO_DEEP_SLEEP</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> write_radio_config(<span class="keywordtype">char</span> *ptr)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">/* rc_config[0] = 0x005b3402 ; // turn on X-tal */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordtype">int</span> var11 = ((int)ptr &amp; 0xffff) | 0x10000 ;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  BLUE_CTRL-&gt;RADIO_CONFIG = var11 ;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordtype">int</span> i = 0 ;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">while</span>((BLUE_CTRL-&gt;RADIO_CONFIG &amp; 0x10000) != 0)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    i = i+1 ;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga069017076901874ae563e04dbd958d9b">  371</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga069017076901874ae563e04dbd958d9b">RADIO_IRQHandler</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  uint32_t int_value = BLUE_CTRL-&gt;INTERRUPT;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> ( (int_value &amp; <a class="code" href="group___radio___interrupt___status___bits.html#ga87949b12d0c0469a9394e7344eafb194">IRQ_DONE</a>) != 0) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">/* Indicates that there is no scheduling for wakeup Timer */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = 0;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">/* Restore period_slow since it is rewritten by hardware */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    blueglob-&gt;period_slow = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a4feb2d1d5155073bf7fb8da59071e8d6">period_slow_patch</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">/* if (!Is_Flash_Write_On_Going())</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">    {</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">      BLUE_CTRL-&gt;RADIO_CONFIG = ((int)GVAR(rssi_level) &amp; 0xffff) | 0x10000;</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">    } */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    BLUE_CTRL-&gt;RADIO_CONFIG = ((int)(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">rssiLevel</a>) &amp; 0xffff) | 0x10000;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="struct_action_packet.html">ActionPacket</a>* next, *actionPacketBackup;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="struct_blue_trans_struct.html">BlueTransStruct</a> *p;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">/* Copy status in order for callback to access it. */</span> </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>-&gt;<a class="code" href="struct_action_packet.html#ac169ee82321d01c2f1e9e8f63b174188">status</a> = int_value;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span>( ( globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>-&gt;<a class="code" href="struct_action_packet.html#af1c1268d11edc683360147dc955c86fb">condRoutine</a>(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>) ) == TRUE) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      next = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>-&gt;<a class="code" href="struct_action_packet.html#aa3d2ddd907c82858053b6605fa930350">next_true</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      next = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>-&gt;<a class="code" href="struct_action_packet.html#a72c9dc6c449768dab54fcad58c5f4d4d">next_false</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span>(next == <a class="code" href="group___radio___exported___constants.html#ga9f7616948dad619974922a1559e97b9f">NULL_0</a>) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment">/* timer2 off */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      BLUE_CTRL-&gt;TIMEOUT = <a class="code" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      blueglob-&gt;Config = 0;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      blueglob-&gt;Config = (blueglob-&gt;Config &amp; 0xFFF0) | (next-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a> | 0x48);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      p= &amp;next-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      (bluedata + next-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>)-&gt;stat_config  = next-&gt;<a class="code" href="struct_action_packet.html#ab407922585cd168aa2561d44dbc5f6df">trans_config</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      (bluedata + next-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>)-&gt;txpoint  = <a class="code" href="group___radio___exported___macros.html#ga88a37a2d5f0cbb9c6c502bc687944ac1">BLUE_STRUCT_PTR_CAST</a>(p);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      (bluedata + next-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>)-&gt;rcvpoint  = <a class="code" href="group___radio___exported___macros.html#ga88a37a2d5f0cbb9c6c502bc687944ac1">BLUE_STRUCT_PTR_CAST</a>(p);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="preprocessor">#ifdef BLUENRG2_DEVICE</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    (bluedata + next-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>)-&gt;remap_chan = (bluedata+next-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>)-&gt;remap_chan | 0x80;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="comment">/* Packet will execute on time specified by WakeupTime */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">if</span>( (next-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#ga6a2da3d40b88fb8a436dbf52ae137d2e">TIMER_WAKEUP</a> ) !=0 ) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">/* timer2 off */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        BLUE_CTRL-&gt;TIMEOUT = <a class="code" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">/* program timer at next-&gt;wakeuptime */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span>((next-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#ga1c53ccfc510f2dc5a6572a6768de9041">RELATIVE</a> ) !=0) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;          globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = BLUE_CTRL-&gt;CURRENT_TIME;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> + us_time_translate(next-&gt;<a class="code" href="struct_action_packet.html#a56d928dbd53eddd0c870766d61c8dbb9">WakeupTime</a>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          <span class="comment">/* Adding the correction factor 1.1875*HS_STARTUP_TIME + HW_OFFSET for all packet except first packet for XC oscillator */</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> -((<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time) + (<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time&gt;&gt;2) - (<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time&gt;&gt;4)) - <a class="code" href="group___radio___exported___constants.html#ga97197e11240838c70c4a4c886c560d33">ANALOG_HW_OFFSET</a> - <a class="code" href="group___radio___exported___constants.html#ga8c67a7c5250d640d45265b81d1ace932">TIMING_ERROR_CORRECTION</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;          globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> =(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> &amp; 0x00FFFFFF);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = next-&gt;<a class="code" href="struct_action_packet.html#a56d928dbd53eddd0c870766d61c8dbb9">WakeupTime</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> =(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> &amp; 0x00FFFFFF);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        BLUE_CTRL-&gt;TIMEOUT = (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> | <a class="code" href="group___radio___exported___constants.html#ga010aab502563eba30d43b1bd83bb3917">WAKEUP_TIMER_TRIGGER</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;     <span class="comment">/*   if(timerSelect(next-&gt;WakeupTime) == BLE_STATUS_SUCCESS) {</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">          blue-&gt;Timeout = (globalParameters.wakeupTime | WAKEUP_TIMER_TRIGGER | BLUE_SLEEP_ENABLE);</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">        else {</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">          blue-&gt;Timeout = globalParameters.wakeupTime | TIMER1_TIMER_TRIGGER;</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">        }*/</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="comment">/* back to back */</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }  </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">/* Accept the packet even with CRC Error */</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span>(   ( (int_value &amp; <a class="code" href="group___radio___interrupt___status___bits.html#ga1acd05f6960a09f649fc7117ce8865c9">IRQ_RCV_OK</a>) != 0) || ( (int_value &amp; <a class="code" href="group___radio___interrupt___status___bits.html#ga7446b20afe188e5d640c4f927a685f1e">IRQ_CRC_ERR</a>) != 0) ) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">/* read RSSI */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>-&gt;<a class="code" href="struct_action_packet.html#aba1d1b11954fc56625867a6f30eba9a3">rssi</a> =  read_RSSI();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="comment">/* bluedata-&gt;config = bluedata-&gt;config ^ 0x80 ;  toggle NESN bit</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">      bluedata-&gt;config = bluedata-&gt;config &amp; 0x7F ;  //reset NESN bit */</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="comment">/* read time stamp */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>-&gt;<a class="code" href="struct_action_packet.html#abc2f70de235c306b07d819dde07149ff">timestamp_receive</a> = BLUE_CTRL-&gt;TIMER_CAPTURE;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    actionPacketBackup = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a> = next;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    actionPacketBackup-&gt;<a class="code" href="struct_action_packet.html#a0469b8c979205e766c56b1952f98eaf5">dataRoutine</a>(actionPacketBackup, next);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> ( (int_value &amp; <a class="code" href="group___radio___interrupt___status___bits.html#ga8bf03985ac73886ef1bf5021d5e3db34">IRQ_WAKEUP_2</a>) != 0) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    RADIO_HostTimerCallback();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (int_value &amp; <a class="code" href="group___radio___interrupt___status___bits.html#ga0d057d9fa4600e7c3b8c136c13a4bf1b">BIT_TIME_OVERRUN</a>) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">// Timer overrun!!!</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    RADIO_TimerOverrunCallback();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">/* clear interrupts */</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  BLUE_CTRL-&gt;INTERRUPT = int_value;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  return ;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga2de39310150695611bc33237b12ddf44">  488</a></span>&#160;uint8_t <a class="code" href="group___radio___exported___functions.html#ga2de39310150695611bc33237b12ddf44">RADIO_StopActivity</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="group___radio___exported___macros.html#ga95c8ac582c31dd55944250da123fd563">MASK_INTERRUPTS</a>();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  blueglob-&gt;Config = 0; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  BLUE_CTRL-&gt;TIMEOUT = <a class="code" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a> = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a96f2653a91b0f55533fb3a180af3cb">forceRadiotoStop</a> = TRUE;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="group___radio___exported___macros.html#ga289116058fd4856caadf5b268e82cc42">UNMASK_INTERRUPTS</a>();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">return</span> TRUE;     </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga3eba6192d724a8caee1e861f0b161299">  511</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga3eba6192d724a8caee1e861f0b161299">RADIO_SetEncryptionCount</a>(uint8_t StateMachineNo, uint8_t *count_tx, uint8_t *count_rcv) </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a>(StateMachineNo));</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; 5; i++) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    (bluedata + StateMachineNo)-&gt;Pack_count_Rcv[i] = count_rcv[i];</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    (bluedata + StateMachineNo)-&gt;Pack_count_Tx[i] = count_tx[i];</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">return</span>; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#gab739a16f54075b880c80ef332b50a3b9">  532</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#gab739a16f54075b880c80ef332b50a3b9">RADIO_SetEncryptionAttributes</a>(uint8_t StateMachineNo, uint8_t *enc_iv, uint8_t *enc_key) </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{   </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  uint8_t i = 0;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a>(StateMachineNo));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">for</span>(i = 0; i &lt; 8; i++) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    (bluedata + StateMachineNo)-&gt;enc_iv[i] = enc_iv[i];</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    (bluedata + StateMachineNo)-&gt;enc_key[i] = enc_key[i];</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">for</span>(i = 8; i &lt; 16; i++) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    (bluedata + StateMachineNo)-&gt;enc_key[i] = enc_key[i];</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  return ; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;}</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga643d943280bbd627012250457583c2fa">  564</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga643d943280bbd627012250457583c2fa">RADIO_SetChannelMap</a>(uint8_t StateMachineNo,uint8_t *chan_remap)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a>(StateMachineNo));  </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; 5; i++) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    (bluedata + StateMachineNo)-&gt;chan_remap[i] = chan_remap[i];</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  }     </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  return ; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#gad6bc9d340eed7be2063223a721094326">  604</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#gad6bc9d340eed7be2063223a721094326">RADIO_SetChannel</a>(uint8_t StateMachineNo, uint8_t channel, uint8_t channel_increment) </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a>(StateMachineNo)); </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga9254a0b2d870516dea400b5896318216">IS_RFCHANNEL_VALID</a>(channel)); </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  (bluedata + StateMachineNo)-&gt;unmapped_chan = channel;  </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  (bluedata + StateMachineNo)-&gt;hop_incr = channel_increment;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  return ; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga5a337743fb715077dee5b0eae05ea250">  636</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga5a337743fb715077dee5b0eae05ea250">RADIO_SetTxAttributes</a>(uint8_t StateMachineNo, uint32_t NetworkID, uint32_t crc_init, uint32_t sca)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;{</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a>(StateMachineNo)); </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  (bluedata + StateMachineNo)-&gt;access_address = NetworkID;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  (bluedata + StateMachineNo)-&gt;crc_init = crc_init;      </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">/* blueglob-&gt;period_slow = sca; */</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">return</span>; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga2458fb0b7e280b21256ac507373202e3">  655</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga2458fb0b7e280b21256ac507373202e3">RADIO_SetBackToBackTime</a>(uint32_t back_to_back_time)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a883a3e715e0bba5845b3f9ef9e68993a">back2backTime</a> = back_to_back_time;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga4e133c51f1a7e27875e8c1386fc87ca7">  684</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga4e133c51f1a7e27875e8c1386fc87ca7">RADIO_SetTxPower</a>(uint8_t PowerLevel)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga70bf049d7716553d8662d6350f19eadf">IS_POWERLEVEL_VALID</a>(PowerLevel)); </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  PowerLevel &lt;&lt;= 3;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> n = 0; n &lt;<a class="code" href="group___radio___exported___constants.html#ga1f66e54999d31d40a4593b42b6599560">STATEMACHINE_COUNT</a> ; n++) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    (bluedata+n)-&gt;conf_byte5 = PowerLevel;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  </div>
<div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#gaa7299f02d7dac07cc0cf4502bb530b9d">  711</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#gaa7299f02d7dac07cc0cf4502bb530b9d">RADIO_SetEncryptFlags</a>(uint8_t StateMachineNo, FunctionalState EncryptFlagTx, FunctionalState EncryptFlagRcv)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;{</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a>(StateMachineNo));</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  assert_param(IS_FUNCTIONAL_STATE(EncryptFlagTx));</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  assert_param(IS_FUNCTIONAL_STATE(EncryptFlagRcv));</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span>(EncryptFlagTx==ENABLE || EncryptFlagRcv==ENABLE) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    (bluedata + StateMachineNo)-&gt;config = (bluedata + StateMachineNo)-&gt;config | 0x0A;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    (bluedata + StateMachineNo)-&gt;config = (bluedata + StateMachineNo)-&gt;config &amp; 0xF5;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00734"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga931ac691eb57757b5f9a1d29ec3d3cc1">  734</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga931ac691eb57757b5f9a1d29ec3d3cc1">RADIO_SetReservedArea</a>(<a class="code" href="struct_action_packet.html">ActionPacket</a> *p)</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">//p-&gt;WakeupTime = (uint32_t) (p-&gt;WakeupTime * 0.525); /* convert us to appropriated value.  1000 * 1/512000 = 1953.125 */</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#gaf52e854f55fb7d92917dd2a34d6d4446">IS_DELAY_VALID</a>(p-&gt;<a class="code" href="struct_action_packet.html#a56d928dbd53eddd0c870766d61c8dbb9">WakeupTime</a>));</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#ab72c048bf2fcffe082a1ecdbe618bc0e">datptr</a> = <a class="code" href="group___radio___exported___macros.html#ga08d2939bc3b9cb20c7c8dd88c3f70388">BLUE_DATA_PTR_CAST</a>(p-&gt;<a class="code" href="struct_action_packet.html#ad12e2315849cde57ed54a1455669e241">data</a>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">/* rcvlen[17:0] */</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">if</span>(p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &lt; 0x40000) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[0] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a>)       &amp; 0x000000FF ;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[1] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 8)  &amp; 0x000000FF ;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 16) &amp; 0x00000003 ;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &lt; 0x100000) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[0] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 2)  &amp; 0x000000FF ;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[1] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 10) &amp; 0x000000FF ;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 18) &amp; 0x00000003 ;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] |= 0x04;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &lt; 0x400000) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[0] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 4)  &amp; 0x000000FF ;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[1] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 12) &amp; 0x000000FF ;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 20) &amp; 0x00000003 ;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] |= 0x08;  </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &lt; 0x1000000) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[0] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 6)  &amp; 0x000000FF ;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[1] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 14) &amp; 0x000000FF ;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] =   (p-&gt;<a class="code" href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ReceiveWindowLength</a> &gt;&gt; 22) &amp; 0x00000003 ;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] |= 0x0C; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">/* error */</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">if</span>((p-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#gac72f68940a0e0af035539b58b53983e7">TIMESTAMP_POSITION</a>) == 0) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] |= <a class="code" href="group___radio___exported___constants.html#ga980a813712caa7e8ccec602e6eeef113">TIMESTAMP_POSITION_LASTBIT</a>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] |= <a class="code" href="group___radio___exported___constants.html#ga6fe3144e54ea208d7f2cd395412fbd3e">TIMESTAMP_POSITION_ACCESSADDRESS</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">/* p-&gt;trans_packet.rcvlen[2] = p-&gt;trans_packet.rcvlen[2] | 0x30 | 0x40 | TIMESTAMP_POSITION; */</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] = p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">rcvlen</a>[2] | 0x30;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#ad453fb326fd78865a792cf8fc27e8cfc">timeout</a>[0] = (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a883a3e715e0bba5845b3f9ef9e68993a">back2backTime</a> &gt;&gt; 0)  &amp; 0x000000FF;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#ad453fb326fd78865a792cf8fc27e8cfc">timeout</a>[1] = (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a883a3e715e0bba5845b3f9ef9e68993a">back2backTime</a> &gt;&gt; 8)  &amp; 0x000000FF;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#ad453fb326fd78865a792cf8fc27e8cfc">timeout</a>[2] = (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a883a3e715e0bba5845b3f9ef9e68993a">back2backTime</a> &gt;&gt; 16) &amp; 0x0000000F; <span class="comment">/* only 20 bits */</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> =0;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> = (p-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#gaaf475ca5af00817f38dbe270a0f02b54">INC_CHAN</a>) | (p-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#ga269b4d868ef01d74f3fa6b1196f2d9ac">PLL_TRIG</a>) | (p-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#ga42c5be08c4898d315b1e04930678e652">TXRX</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">/* next state is zero */</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> = p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> &amp; 0x1F;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">/* sleep . do not go to sleep*/</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> = p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> &amp; 0xFB;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">/* for multi-state automatically increment the channel */</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> = p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">byte10</a> | ((p-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>)&lt;&lt;5);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">/* enable all interrupts */</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>.<a class="code" href="struct_blue_trans_struct.html#a178188900fbfecee2d8d72f7e5bd7879">byte11</a> = 0xFF;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  p-&gt;<a class="code" href="struct_action_packet.html#ab407922585cd168aa2561d44dbc5f6df">trans_config</a> =0;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span>( (p-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#ga42c5be08c4898d315b1e04930678e652">TXRX</a>) != 0) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    p-&gt;<a class="code" href="struct_action_packet.html#ab407922585cd168aa2561d44dbc5f6df">trans_config</a> = 0x80;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  return ;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga1037db33ae8dcd93ee04f6ec9dea0f2b">  823</a></span>&#160;uint8_t <a class="code" href="group___radio___exported___functions.html#ga1037db33ae8dcd93ee04f6ec9dea0f2b">RADIO_MakeActionPacketPending</a>(<a class="code" href="struct_action_packet.html">ActionPacket</a> *p)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;{</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  uint8_t returnValue = <a class="code" href="group___radio___exported___constants.html#ga8bd93c2e3c728e26e65eea4e597e2ccb">SUCCESS_0</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  uint32_t dummyTime ;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="group___radio___exported___functions.html#gac78fcbc1515a6ce6196a4b10822dc755">RADIO_GetStatus</a>(&amp;dummyTime) == <a class="code" href="group___radio___exported___constants.html#gab988a6b20c8af806c8fdd999444a76b9">BLUE_IDLE_0</a>)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a96f2653a91b0f55533fb3a180af3cb">forceRadiotoStop</a> = FALSE;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    uint16_t  statemachineNo;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="struct_blue_trans_struct.html">BlueTransStruct</a> *p1 ; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">/* timer2 off */</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    BLUE_CTRL-&gt;TIMEOUT = <a class="code" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">rssiLevel</a>[0] = 0x2e86 ;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">rssiLevel</a>[1] = 0 ;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    int32_t* temp ;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    temp = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a5fbfd8542cc1c516ce42f2b4d35e301c">hot_ana_config_table_a</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    blueglob-&gt;RadioConfigPtr = <a class="code" href="group___radio___exported___macros.html#ga08d2939bc3b9cb20c7c8dd88c3f70388">BLUE_DATA_PTR_CAST</a>(temp) ; <span class="comment">/* to be discussed */</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="comment">/* Set_Radio_Config_Data(); */</span>   <span class="comment">/* to be discussed */</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="comment">/* tell the schedular which table in SRAM should be applied and activate it */</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    statemachineNo = 0x0007 &amp; p-&gt;<a class="code" href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">StateMachineNo</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    blueglob-&gt;Config = (blueglob-&gt;Config &amp; 0xFFF0) | (statemachineNo | 0x48);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    (bluedata+statemachineNo)-&gt;txpoint_prev = 0;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    (bluedata+statemachineNo)-&gt;rcvpoint_prev = 0;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    (bluedata+statemachineNo)-&gt;txpoint_next = 0;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    p1= &amp;p-&gt;<a class="code" href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">trans_packet</a>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    (bluedata+statemachineNo)-&gt;txpoint =  <a class="code" href="group___radio___exported___macros.html#ga88a37a2d5f0cbb9c6c502bc687944ac1">BLUE_STRUCT_PTR_CAST</a>(p1);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    (bluedata+statemachineNo)-&gt;rcvpoint = <a class="code" href="group___radio___exported___macros.html#ga88a37a2d5f0cbb9c6c502bc687944ac1">BLUE_STRUCT_PTR_CAST</a>(p1);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="preprocessor">#ifdef BLUENRG2_DEVICE</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    (bluedata+statemachineNo)-&gt;remap_chan = (bluedata+statemachineNo)-&gt;remap_chan | 0x80;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">current_action_packet</a> = p;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    (bluedata+statemachineNo)-&gt;stat_config = p-&gt;<a class="code" href="struct_action_packet.html#ab407922585cd168aa2561d44dbc5f6df">trans_config</a>; <span class="comment">/* Transmision or reception for first packet */</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">/* program timer at next-&gt;wakeuptime */</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="group___radio___exported___macros.html#ga95c8ac582c31dd55944250da123fd563">MASK_INTERRUPTS</a>();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span>((p-&gt;<a class="code" href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionTag</a> &amp; <a class="code" href="group___radio___action_tag___bit_mask.html#ga1c53ccfc510f2dc5a6572a6768de9041">RELATIVE</a> ) !=0) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = BLUE_CTRL-&gt;CURRENT_TIME;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="comment">/* Adding the correction factor 1.1875*HS_STARTUP_TIME + ANALOG_HW_OFFSET for the first packet */</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> + us_time_translate(p-&gt;<a class="code" href="struct_action_packet.html#a56d928dbd53eddd0c870766d61c8dbb9">WakeupTime</a>) - (<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time + (<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time&gt;&gt;2)-(<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;hs_startup_time&gt;&gt;4)) - <a class="code" href="group___radio___exported___constants.html#ga97197e11240838c70c4a4c886c560d33">ANALOG_HW_OFFSET</a>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> =(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> &amp; 0x00FFFFFF);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> = p-&gt;<a class="code" href="struct_action_packet.html#a56d928dbd53eddd0c870766d61c8dbb9">WakeupTime</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> =(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> &amp; 0x00FFFFFF);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    BLUE_CTRL-&gt;TIMEOUT = (globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">wakeupTime</a> | <a class="code" href="group___radio___exported___constants.html#ga010aab502563eba30d43b1bd83bb3917">WAKEUP_TIMER_TRIGGER</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a>);    </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="group___radio___exported___macros.html#ga289116058fd4856caadf5b268e82cc42">UNMASK_INTERRUPTS</a>();</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    returnValue = <a class="code" href="group___radio___exported___constants.html#gaa9c73a66a9e8f92f1571bc3d8cfeae72">RADIO_BUSY_C4</a>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#gae9d83dcfff9877e35fa7286aff455171">  900</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#gae9d83dcfff9877e35fa7286aff455171">RADIO_CrystalCheck</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;{</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="struct_clk32_context__t.html">Clk32Context_t</a> *Clk32Context_p = &amp;(globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0fe668fcc510d70104a2c0240ef9ed1f">Clk32Context</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  BOOL new_computation_flag = Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">period</a> == -1;    </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a>-&gt;ls_source != 0) <span class="comment">/* using internal RO */</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (new_computation_flag)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      int32_t freq1 = 0 ;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      int32_t var1 = 0;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      int32_t freq2;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">do</span>{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        freq2 = freq1 ;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        freq1 = CKGEN_BLE-&gt;CLK32K_FREQ; <span class="comment">/*reading frequency from hardware */</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        var1++;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      }<span class="keywordflow">while</span>((freq1 != freq2 || freq1 == 0) &amp;&amp; var1 &lt; 5000); <span class="comment">/* repeat until two consecutive reading are equal */</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#aa7ef643889a0640c5f896c31ada3df5d">freq</a> = freq1;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">period</a> = CKGEN_BLE-&gt;CLK32K_PERIOD;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a86ba31a37fd0f0def13ffe9ef5e62cad">Time_mT</a> = <a class="code" href="group___radio___exported___macros.html#gaa3ced72fc096ddb9f07ce99e5c6dafc6">GET_CUR_TIME</a>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      BlueNRG_Start_Crystal_Measurement();</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      uint32_t current_time_mT = <a class="code" href="group___radio___exported___macros.html#gaa3ced72fc096ddb9f07ce99e5c6dafc6">GET_CUR_TIME</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">if</span> ((Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a10910fc520184f55ece9f48ea1c6aba5">started_flag</a> != 0) &amp;&amp; (CKGEN_BLE-&gt;CLK32K_IT != 0) )</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#aa7ef643889a0640c5f896c31ada3df5d">freq</a> = CKGEN_BLE-&gt;CLK32K_FREQ;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">period</a> = CKGEN_BLE-&gt;CLK32K_PERIOD;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a10910fc520184f55ece9f48ea1c6aba5">started_flag</a> = 0;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a86ba31a37fd0f0def13ffe9ef5e62cad">Time_mT</a> = current_time_mT;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        new_computation_flag = TRUE;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">if</span> ((Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a10910fc520184f55ece9f48ea1c6aba5">started_flag</a> == 0) &amp;&amp; (((uint32_t)<a class="code" href="group___radio___exported___macros.html#ga688ae1692c44833bfe88c044e6be2fe8">TIME24_DIFF</a>(current_time_mT, Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">calibr</a>.<a class="code" href="struct_clk32_context__t.html#a86ba31a37fd0f0def13ffe9ef5e62cad">Time_mT</a>)) &gt; (1000&lt;&lt;9)))<span class="comment">/* [RG:] about 1sec +/-20% */</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;          BlueNRG_Start_Crystal_Measurement();</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">else</span> {  <span class="comment">/* using external Crystal */</span>    </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">period</a> = 0; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordflow">if</span> (new_computation_flag == TRUE )</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    set_freq(Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#aa7ef643889a0640c5f896c31ada3df5d">freq</a>,Clk32Context_p-&gt;<a class="code" href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">period</a>) ;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga7786f7a54b3962c3b26eccc25c7a1585">  959</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga7786f7a54b3962c3b26eccc25c7a1585">RADIO_Init</a>(uint16_t hs_startup_time, uint8_t low_speed_osc, uint32_t* hot_table, FunctionalState whitening)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;{     </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  assert_param(IS_FUNCTIONAL_STATE(whitening));</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="group___radio___exported___macros.html#gae2a4839c8a7daab774258a37e3df89b4">DISABLE_INTERRUPT</a>(<a class="code" href="group___radio___exported___constants.html#gabb4868492f074c98ebe79096ec8dac03">IRQBLUE</a>);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  blueglob-&gt;TxDelay = <a class="code" href="group___radio___t_x_r_x___delay___constants.html#ga3f3816567a2f513dd0e1f9eb17992fb2">TX_DELAY</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  blueglob-&gt;TxDelay1 = <a class="code" href="group___radio___t_x_r_x___delay___constants.html#ga6179315242df04e1116a135dfa151de0">TX_DELAY1</a>;        </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  blueglob-&gt;RcvDelay = <a class="code" href="group___radio___t_x_r_x___delay___constants.html#gac55a27e4c3eae59bb1687eb7e8d1fe4b">RX_DELAY</a>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  blueglob-&gt;RcvDelay1 = <a class="code" href="group___radio___t_x_r_x___delay___constants.html#gaee0e5b7d3d70c9c55086ec41a8eff72a">RX_DELAY1</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">if</span>(whitening == DISABLE) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="comment">/* disable Transmision Whitening */</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    blueglob-&gt;TxDelay |= 0x80;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    blueglob-&gt;TxDelay1 |= 0x80; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="comment">/* disable Receiving Whitening */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    blueglob-&gt;RcvDelay |= 0x80;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    blueglob-&gt;RcvDelay1 |= 0x80; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#ab40abb133a85a0aceb7881100c118715">hardware_config</a>.<a class="code" href="structconfig__table__t.html#a0cccb361cd710eab41ab2db25bde18bc">hs_startup_time</a> = hs_startup_time;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#ab40abb133a85a0aceb7881100c118715">hardware_config</a>.<a class="code" href="structconfig__table__t.html#a7767db1b54602912cc697d0893aad1da">ls_source</a> = low_speed_osc;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#ab40abb133a85a0aceb7881100c118715">hardware_config</a>.<a class="code" href="structconfig__table__t.html#a9b390da71a5d40102132cd633a841022">hot_ana_config_table</a> = hot_table;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  blueglob-&gt;Config = 0;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  BLUE_CTRL-&gt;TIMEOUT = <a class="code" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a> | <a class="code" href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a> ;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  BLUE_CTRL-&gt;HOST_WKUP_TIMER = <a class="code" href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a>  | (1&lt;&lt;<a class="code" href="group___radio___exported___constants.html#gacfe07117d6016b869203727d286a4417">OFF_R_SLEEP</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordtype">int</span> int_value = BLUE_CTRL-&gt;INTERRUPT ;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  BLUE_CTRL-&gt;INTERRUPT = int_value ; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  blueglob-&gt;period_slow = <a class="code" href="group___radio___exported___constants.html#ga6a0bd3c571fcc0ed3d6b3d7cad68ed92">SCA_DEFAULTVALUE</a>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="preprocessor">#if BLUENRG_START_CRYSTAL_MEASUREMENT_CALLED_EXTERNALLY != 0   </span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (Clk32Context.calibr.started_flag != 1){ </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    CKGEN_BLE-&gt;CLK32K_IT = 1;    </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    BlueNRG_Start_Crystal_Measurement();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="preprocessor">#else    </span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  CKGEN_BLE-&gt;CLK32K_COUNT = 23 ;  </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a883a3e715e0bba5845b3f9ef9e68993a">back2backTime</a> = 150; <span class="comment">/* 150 micro second */</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0a96f2653a91b0f55533fb3a180af3cb">forceRadiotoStop</a> = FALSE;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a943e8f2eaa6b0a06515f77ca7857302e">powerUpfirstPacket</a> = 1;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  globalParameters.<a class="code" href="struct_radio_global_parameters__t.html#a0fe668fcc510d70104a2c0240ef9ed1f">Clk32Context</a>.<a class="code" href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">period</a> = -1;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <a class="code" href="group___radio___exported___functions.html#gae9d83dcfff9877e35fa7286aff455171">RADIO_CrystalCheck</a>();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <a class="code" href="group___radio___exported___functions.html#ga4e133c51f1a7e27875e8c1386fc87ca7">RADIO_SetTxPower</a>(11);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="group___radio___exported___functions.html#gaa7299f02d7dac07cc0cf4502bb530b9d">RADIO_SetEncryptFlags</a>(0, DISABLE, DISABLE);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">//blueglob-&gt;wakeup_time_offset= 0x07;  /* 30.51us */</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <a class="code" href="group___radio___exported___macros.html#gadc0d0187921522dd10ae16e5166d3d62">ENABLE_INTERRUPT</a>(<a class="code" href="group___radio___exported___constants.html#gabb4868492f074c98ebe79096ec8dac03">IRQBLUE</a>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="group___radio___exported___macros.html#gadc0d0187921522dd10ae16e5166d3d62">ENABLE_INTERRUPT</a>(<a class="code" href="group___radio___exported___constants.html#ga99ae1fc5a4e71bf8ae9e77e7be558d70">IRQNVM</a>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#gac78fcbc1515a6ce6196a4b10822dc755"> 1034</a></span>&#160;uint8_t <a class="code" href="group___radio___exported___functions.html#gac78fcbc1515a6ce6196a4b10822dc755">RADIO_GetStatus</a>(uint32_t *time)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;{</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  uint8_t retValue =  <a class="code" href="group___radio___exported___constants.html#gab988a6b20c8af806c8fdd999444a76b9">BLUE_IDLE_0</a>; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  uint32_t timeOut;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keywordflow">if</span>((blueglob-&gt;Config &amp; 0x8) != 0)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    timeOut = BLUE_CTRL-&gt;TIMEOUT;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    *time = timeOut;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    timeOut = (timeOut &gt;&gt; 24) &amp; 0x07;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">if</span>(timeOut == <a class="code" href="group___radio___exported___constants.html#ga82e5a62a8aeae504b21d5534bb2a3449">TIMER2_TIMER_MASK</a>)</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      retValue =  <a class="code" href="group___radio___exported___constants.html#gac93f11b82a28e8e0c5e5989f3d717d6d">BLUE_BUSY_NOWAKEUP_T2</a>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(timeOut == <a class="code" href="group___radio___exported___constants.html#ga0e1b36244cb660ca92614cdaf3bc13e9">TIMER1_TIMER_MASK</a>)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      retValue =  <a class="code" href="group___radio___exported___constants.html#gad970c9fdbfb532ea0968982b6e5da8ca">BLUE_BUSY_NOWAKEUP_T1</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(timeOut == <a class="code" href="group___radio___exported___constants.html#ga6afabd078b4ecd4738e88ac2e03eb5b5">WAKEUP_TIMER_MASK</a>)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      retValue =  <a class="code" href="group___radio___exported___constants.html#ga314de3d14be76302b6a48f637e950382">BLUE_BUSY_WAKEUP</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">/* *time =globalParameters.wakeupTime; */</span>     </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  }       </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">return</span> retValue;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;}</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#gaad89362036826cefbcbb2fec235aabd7"> 1088</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#gaad89362036826cefbcbb2fec235aabd7">RADIO_StartTone</a>(uint8_t RF_Channel, uint8_t powerLevel)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga9254a0b2d870516dea400b5896318216">IS_RFCHANNEL_VALID</a>(RF_Channel)); </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  assert_param(<a class="code" href="group___radio___exported___macros.html#ga70bf049d7716553d8662d6350f19eadf">IS_POWERLEVEL_VALID</a>(powerLevel));</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  </div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  uint8_t channel;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  uint8_t value1;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  uint8_t value2;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  uint32_t dummy;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordtype">char</span> data[24];</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group___radio___exported___functions.html#gac78fcbc1515a6ce6196a4b10822dc755">RADIO_GetStatus</a>(&amp;dummy) == <a class="code" href="group___radio___exported___constants.html#gab988a6b20c8af806c8fdd999444a76b9">BLUE_IDLE_0</a>) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">/* [EM:] Calculate the synt divide factor for 16 MHz quarts and +250 kHz offset wrt the channel center frequency</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">    *  Algorithmically MAK = F_rf*(2^20)/16 = F_rf*(2^16)</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">    *  With F_rf = (2402+2*RF_Channel)+0.25 MHz</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">    *  K corresponds to b19-b0  of MAK</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">    *  A corresponds to b22-b20 of MAK</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">    *  M corresponds to b27-b23 of MAK</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    uint32_t kHz_250_scaled = 16384;    <span class="comment">/* = 0.250*2^20/16 */</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    uint32_t MAK = ((2402+2*RF_Channel)&lt;&lt;16) - kHz_250_scaled;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    uint8_t M  = (MAK&gt;&gt;23)&amp;0x1F;                                             </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    uint8_t A  = (MAK&gt;&gt;20)&amp;0x07;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    uint32_t K = (MAK&amp;0x000FFFFF)+1;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    uint8_t MOD3_DIG_TEST = (M&lt;&lt;3) | (A &amp; 0x7);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    uint8_t MOD2_DIG_TEST = ((K&gt;&gt;12) &amp; 0xFF);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    uint8_t MOD1_DIG_TEST = ((K&gt;&gt; 4) &amp; 0xFF);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    uint8_t MOD0_DIG_TEST = ((K&amp;0x0F)&lt;&lt;4) | 0x09;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    value1  =  0x7E &amp; 0x87;        </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    value1 |= (powerLevel     &lt;&lt; 3);        </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    value2  =  0x3F &amp; 0xF1; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    powerLevel &amp;= 0x07;        </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    value2 |= (powerLevel     &lt;&lt; 1);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    channel = RF_Channel;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    channel &lt;&lt;= 1;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    data[0]  = 0x03;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    data[1]  = 0x04;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    data[2]  = channel;         <span class="comment">// addr 0x4, value channel</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    data[3]  = value1;          <span class="comment">// addr 0x5, value TX power</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    data[4]  = 0x02;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    data[5]  = 0x1C;            <span class="comment">// addr 0x1C, value 0x73</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    data[6]  = 0x73;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    data[7]  = 0x03;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    data[8]  = 0x24;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    data[9]  = value2;          <span class="comment">// addr 0x24, value 0x3F</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    data[10] = 0x3F;            <span class="comment">// addr 0x25, value 0x3F</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    data[11] = 0x02;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    data[12] = 0x23;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    data[13] = 0x03;            <span class="comment">// addr 0x23, value 0x03</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    data[14] = 0x02;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    data[15] = 0x23;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    data[16] = 0x07;            <span class="comment">// addr 0x23, value 0x07</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">/*[EM:]     Fix 204: force MAK values through MODx test registers */</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    data[17] = 0x05; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    data[18] = 0x28;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    data[19] = MOD3_DIG_TEST;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    data[20] = MOD2_DIG_TEST;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    data[21] = MOD1_DIG_TEST;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    data[22] = MOD0_DIG_TEST;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    data[23] = 0x0;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    write_radio_config(data);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;}</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga9aac37ca22d583608270287965f57ade"> 1166</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga9aac37ca22d583608270287965f57ade">RADIO_StopTone</a>()</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;{</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordtype">char</span> data[9];</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  data[0] = 0x04;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  data[1] = 0x23;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  data[2] = 0x00;             <span class="comment">// addr 0x23, value 0x00</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  data[3] = 0x0E;             <span class="comment">// addr 0x24, value 0x0E</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  data[4] = 0x00;             <span class="comment">// addr 0x25, value 0x00</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  data[5] = 0x02;             <span class="comment">//[EM:]   Fix 204</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  data[6] = 0x2B;             <span class="comment">// Reg MOD0_DIG_TEST@0x2B</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  data[7] = 0x08;             <span class="comment">// Reset to default value (disable mod test mode)</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  data[8] = 0x00;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  write_radio_config(data);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="group___radio___exported___functions.html#ga7e0e139a4dff1d1b74e174709b2cb57a"> 1191</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___radio___exported___functions.html#ga7e0e139a4dff1d1b74e174709b2cb57a">RADIO_EncryptPlainData</a>(uint8_t *Key, </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                            uint8_t *plainData,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                            uint8_t *cypherData)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{   </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  uint32_t key[4] ;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  uint32_t cleartext[4] ;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  uint32_t ciphertext[4] ;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keyword">volatile</span> uint32_t ii ;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    key[i] = ((uint32_t)Key[i*4]) | ((uint32_t)Key[i*4+1])&lt;&lt;8 | ((uint32_t)Key[i*4+2])&lt;&lt;16 | ((uint32_t)Key[i*4+3])&lt;&lt;24;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    cleartext[i] = ((uint32_t)plainData[i*4]) | ((uint32_t)plainData[i*4+1])&lt;&lt;8 | ((uint32_t)plainData[i*4+2])&lt;&lt;16 | ((uint32_t)plainData[i*4+3])&lt;&lt;24;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  BLUE_CTRL-&gt;AES_KEY0 = key[3];</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  BLUE_CTRL-&gt;AES_KEY1 = key[2];</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  BLUE_CTRL-&gt;AES_KEY2 = key[1];</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  BLUE_CTRL-&gt;AES_KEY3 = key[0];</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  BLUE_CTRL-&gt;CLEAR_TEXT0 = cleartext[3];</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  BLUE_CTRL-&gt;CLEAR_TEXT1 = cleartext[2];</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  BLUE_CTRL-&gt;CLEAR_TEXT2 = cleartext[1];</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  BLUE_CTRL-&gt;CLEAR_TEXT3 = cleartext[0];</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  ii = 0 ;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">while</span>( ( BLUE_CTRL-&gt;STATUS &amp; <a class="code" href="group___radio___interrupt___status___bits.html#ga6994ce6ff248e58486c421dbb66c7408">BIT_AES_READY</a>) == 0 &amp;&amp; ii &lt; 100) { </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    ii++ ;}</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  ciphertext[0] = BLUE_CTRL-&gt;AES_CYPHERTEXT3;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  ciphertext[1] = BLUE_CTRL-&gt;AES_CYPHERTEXT2;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  ciphertext[2] = BLUE_CTRL-&gt;AES_CYPHERTEXT1;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  ciphertext[3] = BLUE_CTRL-&gt;AES_CYPHERTEXT0;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    cypherData[i*4] = ((uint8_t)ciphertext[i]);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    cypherData[i*4+1] = (uint8_t)(ciphertext[i]&gt;&gt;8);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    cypherData[i*4+2] = (uint8_t)(ciphertext[i]&gt;&gt;16);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    cypherData[i*4+3] = (uint8_t)(ciphertext[i]&gt;&gt;24);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  return ;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;}</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">/******************* (C) COPYRIGHT 2017 STMicroelectronics *****END OF FILE****/</span></div>
<div class="ttc" id="group___radio___exported___macros_html_ga9254a0b2d870516dea400b5896318216"><div class="ttname"><a href="group___radio___exported___macros.html#ga9254a0b2d870516dea400b5896318216">IS_RFCHANNEL_VALID</a></div><div class="ttdeci">#define IS_RFCHANNEL_VALID(RF_CHANNEL)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00124">BlueNRG1_radio.c:124</a></div></div>
<div class="ttc" id="struct_action_packet_html_a0039310ea36b2df7111f9f06e6301add"><div class="ttname"><a href="struct_action_packet.html#a0039310ea36b2df7111f9f06e6301add">ActionPacket::ReceiveWindowLength</a></div><div class="ttdeci">uint32_t ReceiveWindowLength</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00228">BlueNRG1_radio.h:228</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_gab739a16f54075b880c80ef332b50a3b9"><div class="ttname"><a href="group___radio___exported___functions.html#gab739a16f54075b880c80ef332b50a3b9">RADIO_SetEncryptionAttributes</a></div><div class="ttdeci">void RADIO_SetEncryptionAttributes(uint8_t StateMachineNo, uint8_t *enc_iv, uint8_t *enc_key)</div><div class="ttdoc">This routines sets the 8-byte encryption initial vector, and the 16-byte encryption key...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00532">BlueNRG1_radio.c:532</a></div></div>
<div class="ttc" id="struct_action_packet_html_aba1d1b11954fc56625867a6f30eba9a3"><div class="ttname"><a href="struct_action_packet.html#aba1d1b11954fc56625867a6f30eba9a3">ActionPacket::rssi</a></div><div class="ttdeci">int32_t rssi</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00235">BlueNRG1_radio.h:235</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga069017076901874ae563e04dbd958d9b"><div class="ttname"><a href="group___radio___exported___functions.html#ga069017076901874ae563e04dbd958d9b">RADIO_IRQHandler</a></div><div class="ttdeci">void RADIO_IRQHandler(void)</div><div class="ttdoc">Radio ISR. Completed event is handled here. Besides, next packet is scheduled here. </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00371">BlueNRG1_radio.c:371</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga70bf049d7716553d8662d6350f19eadf"><div class="ttname"><a href="group___radio___exported___macros.html#ga70bf049d7716553d8662d6350f19eadf">IS_POWERLEVEL_VALID</a></div><div class="ttdeci">#define IS_POWERLEVEL_VALID(POWER)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00123">BlueNRG1_radio.c:123</a></div></div>
<div class="ttc" id="struct_blue_trans_struct_html_a6fe44691309393b72fe565ae2a32292e"><div class="ttname"><a href="struct_blue_trans_struct.html#a6fe44691309393b72fe565ae2a32292e">BlueTransStruct::rcvlen</a></div><div class="ttdeci">volatile uint8_t rcvlen[3]</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00175">BlueNRG1_radio.h:175</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a6e5aeac95bd9b4eb19f47a881a8c7e9e"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a6e5aeac95bd9b4eb19f47a881a8c7e9e">RadioGlobalParameters_t::freq_global_debug</a></div><div class="ttdeci">int32_t freq_global_debug</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00206">BlueNRG1_radio.h:206</a></div></div>
<div class="ttc" id="group___radio___interrupt___status___bits_html_ga87949b12d0c0469a9394e7344eafb194"><div class="ttname"><a href="group___radio___interrupt___status___bits.html#ga87949b12d0c0469a9394e7344eafb194">IRQ_DONE</a></div><div class="ttdeci">#define IRQ_DONE</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00090">BlueNRG1_radio.h:90</a></div></div>
<div class="ttc" id="group___radio___interrupt___status___bits_html_ga6994ce6ff248e58486c421dbb66c7408"><div class="ttname"><a href="group___radio___interrupt___status___bits.html#ga6994ce6ff248e58486c421dbb66c7408">BIT_AES_READY</a></div><div class="ttdeci">#define BIT_AES_READY</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00099">BlueNRG1_radio.h:99</a></div></div>
<div class="ttc" id="struct_blue_trans_struct_html_ab72c048bf2fcffe082a1ecdbe618bc0e"><div class="ttname"><a href="struct_blue_trans_struct.html#ab72c048bf2fcffe082a1ecdbe618bc0e">BlueTransStruct::datptr</a></div><div class="ttdeci">volatile uint16_t datptr</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00174">BlueNRG1_radio.h:174</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga010aab502563eba30d43b1bd83bb3917"><div class="ttname"><a href="group___radio___exported___constants.html#ga010aab502563eba30d43b1bd83bb3917">WAKEUP_TIMER_TRIGGER</a></div><div class="ttdeci">#define WAKEUP_TIMER_TRIGGER</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00089">BlueNRG1_radio.c:89</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_gadc0d0187921522dd10ae16e5166d3d62"><div class="ttname"><a href="group___radio___exported___macros.html#gadc0d0187921522dd10ae16e5166d3d62">ENABLE_INTERRUPT</a></div><div class="ttdeci">#define ENABLE_INTERRUPT(irqNum)                      </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00118">BlueNRG1_radio.c:118</a></div></div>
<div class="ttc" id="group___radio___action_tag___bit_mask_html_ga269b4d868ef01d74f3fa6b1196f2d9ac"><div class="ttname"><a href="group___radio___action_tag___bit_mask.html#ga269b4d868ef01d74f3fa6b1196f2d9ac">PLL_TRIG</a></div><div class="ttdeci">#define PLL_TRIG</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00115">BlueNRG1_radio.h:115</a></div></div>
<div class="ttc" id="group___radio___action_tag___bit_mask_html_ga42c5be08c4898d315b1e04930678e652"><div class="ttname"><a href="group___radio___action_tag___bit_mask.html#ga42c5be08c4898d315b1e04930678e652">TXRX</a></div><div class="ttdeci">#define TXRX</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00121">BlueNRG1_radio.h:121</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a0a96f2653a91b0f55533fb3a180af3cb"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a0a96f2653a91b0f55533fb3a180af3cb">RadioGlobalParameters_t::forceRadiotoStop</a></div><div class="ttdeci">uint8_t forceRadiotoStop</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00202">BlueNRG1_radio.h:202</a></div></div>
<div class="ttc" id="struct_action_packet_html_a03efec6860c9fcd2694451d092303bb7"><div class="ttname"><a href="struct_action_packet.html#a03efec6860c9fcd2694451d092303bb7">ActionPacket::trans_packet</a></div><div class="ttdeci">BlueTransStruct trans_packet</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00236">BlueNRG1_radio.h:236</a></div></div>
<div class="ttc" id="struct_action_packet_html_af1c1268d11edc683360147dc955c86fb"><div class="ttname"><a href="struct_action_packet.html#af1c1268d11edc683360147dc955c86fb">ActionPacket::condRoutine</a></div><div class="ttdeci">uint8_t(* condRoutine)(ActionPacket *)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00240">BlueNRG1_radio.h:240</a></div></div>
<div class="ttc" id="group___radio___interrupt___status___bits_html_ga7446b20afe188e5d640c4f927a685f1e"><div class="ttname"><a href="group___radio___interrupt___status___bits.html#ga7446b20afe188e5d640c4f927a685f1e">IRQ_CRC_ERR</a></div><div class="ttdeci">#define IRQ_CRC_ERR</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00084">BlueNRG1_radio.h:84</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gad970c9fdbfb532ea0968982b6e5da8ca"><div class="ttname"><a href="group___radio___exported___constants.html#gad970c9fdbfb532ea0968982b6e5da8ca">BLUE_BUSY_NOWAKEUP_T1</a></div><div class="ttdeci">#define BLUE_BUSY_NOWAKEUP_T1</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00064">BlueNRG1_radio.h:64</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gacfe07117d6016b869203727d286a4417"><div class="ttname"><a href="group___radio___exported___constants.html#gacfe07117d6016b869203727d286a4417">OFF_R_SLEEP</a></div><div class="ttdeci">#define OFF_R_SLEEP</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00070">BlueNRG1_radio.c:70</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga6afabd078b4ecd4738e88ac2e03eb5b5"><div class="ttname"><a href="group___radio___exported___constants.html#ga6afabd078b4ecd4738e88ac2e03eb5b5">WAKEUP_TIMER_MASK</a></div><div class="ttdeci">#define WAKEUP_TIMER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00093">BlueNRG1_radio.c:93</a></div></div>
<div class="ttc" id="struct_blue_trans_struct_html"><div class="ttname"><a href="struct_blue_trans_struct.html">BlueTransStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00171">BlueNRG1_radio.h:171</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a54b0ef3435692c4344f2be5ccfc30a58"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a54b0ef3435692c4344f2be5ccfc30a58">RadioGlobalParameters_t::current_action_packet</a></div><div class="ttdeci">ActionPacket * current_action_packet</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00212">BlueNRG1_radio.h:212</a></div></div>
<div class="ttc" id="struct_clk32_context__t_html_aa7ef643889a0640c5f896c31ada3df5d"><div class="ttname"><a href="struct_clk32_context__t.html#aa7ef643889a0640c5f896c31ada3df5d">Clk32Context_t::freq</a></div><div class="ttdeci">int32_t freq</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00192">BlueNRG1_radio.h:192</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga82e5a62a8aeae504b21d5534bb2a3449"><div class="ttname"><a href="group___radio___exported___constants.html#ga82e5a62a8aeae504b21d5534bb2a3449">TIMER2_TIMER_MASK</a></div><div class="ttdeci">#define TIMER2_TIMER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00095">BlueNRG1_radio.c:95</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga99ae1fc5a4e71bf8ae9e77e7be558d70"><div class="ttname"><a href="group___radio___exported___constants.html#ga99ae1fc5a4e71bf8ae9e77e7be558d70">IRQNVM</a></div><div class="ttdeci">#define IRQNVM</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00106">BlueNRG1_radio.c:106</a></div></div>
<div class="ttc" id="struct_clk32_context__t_html"><div class="ttname"><a href="struct_clk32_context__t.html">Clk32Context_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00191">BlueNRG1_radio.h:191</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga2de39310150695611bc33237b12ddf44"><div class="ttname"><a href="group___radio___exported___functions.html#ga2de39310150695611bc33237b12ddf44">RADIO_StopActivity</a></div><div class="ttdeci">uint8_t RADIO_StopActivity(void)</div><div class="ttdoc">This routine force the radio to be stopped. After calling this function, the ISR is not triggered unl...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00488">BlueNRG1_radio.c:488</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga08d2939bc3b9cb20c7c8dd88c3f70388"><div class="ttname"><a href="group___radio___exported___macros.html#ga08d2939bc3b9cb20c7c8dd88c3f70388">BLUE_DATA_PTR_CAST</a></div><div class="ttdeci">#define BLUE_DATA_PTR_CAST(x)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00120">BlueNRG1_radio.c:120</a></div></div>
<div class="ttc" id="group___radio___t_x_r_x___delay___constants_html_gaee0e5b7d3d70c9c55086ec41a8eff72a"><div class="ttname"><a href="group___radio___t_x_r_x___delay___constants.html#gaee0e5b7d3d70c9c55086ec41a8eff72a">RX_DELAY1</a></div><div class="ttdeci">#define RX_DELAY1</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00058">BlueNRG1_radio.c:58</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gaf618f9ccc91389dd3c0c8b75bfcde726"><div class="ttname"><a href="group___radio___exported___constants.html#gaf618f9ccc91389dd3c0c8b75bfcde726">NO_DEEP_SLEEP</a></div><div class="ttdeci">#define NO_DEEP_SLEEP</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00101">BlueNRG1_radio.c:101</a></div></div>
<div class="ttc" id="group___radio___interrupt___status___bits_html_ga1acd05f6960a09f649fc7117ce8865c9"><div class="ttname"><a href="group___radio___interrupt___status___bits.html#ga1acd05f6960a09f649fc7117ce8865c9">IRQ_RCV_OK</a></div><div class="ttdeci">#define IRQ_RCV_OK</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00083">BlueNRG1_radio.h:83</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga314de3d14be76302b6a48f637e950382"><div class="ttname"><a href="group___radio___exported___constants.html#ga314de3d14be76302b6a48f637e950382">BLUE_BUSY_WAKEUP</a></div><div class="ttdeci">#define BLUE_BUSY_WAKEUP</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00066">BlueNRG1_radio.h:66</a></div></div>
<div class="ttc" id="struct_action_packet_html"><div class="ttname"><a href="struct_action_packet.html">ActionPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00220">BlueNRG1_radio.h:220</a></div></div>
<div class="ttc" id="struct_action_packet_html_ac14c3f5a75335b21aaf0f974a9108e39"><div class="ttname"><a href="struct_action_packet.html#ac14c3f5a75335b21aaf0f974a9108e39">ActionPacket::ActionTag</a></div><div class="ttdeci">uint8_t ActionTag</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00223">BlueNRG1_radio.h:223</a></div></div>
<div class="ttc" id="struct_clk32_context__t_html_a949e7c2875d5aa6147d43927c327df03"><div class="ttname"><a href="struct_clk32_context__t.html#a949e7c2875d5aa6147d43927c327df03">Clk32Context_t::period</a></div><div class="ttdeci">int32_t period</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00193">BlueNRG1_radio.h:193</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga4e133c51f1a7e27875e8c1386fc87ca7"><div class="ttname"><a href="group___radio___exported___functions.html#ga4e133c51f1a7e27875e8c1386fc87ca7">RADIO_SetTxPower</a></div><div class="ttdeci">void RADIO_SetTxPower(uint8_t PowerLevel)</div><div class="ttdoc">Configures the transmit power level. </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00684">BlueNRG1_radio.c:684</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gad80273c8e5ead08517aeb0a4147c0cc0"><div class="ttname"><a href="group___radio___exported___constants.html#gad80273c8e5ead08517aeb0a4147c0cc0">TIMER_OFF</a></div><div class="ttdeci">#define TIMER_OFF</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00099">BlueNRG1_radio.c:99</a></div></div>
<div class="ttc" id="struct_action_packet_html_aa3d2ddd907c82858053b6605fa930350"><div class="ttname"><a href="struct_action_packet.html#aa3d2ddd907c82858053b6605fa930350">ActionPacket::next_true</a></div><div class="ttdeci">ActionPacket * next_true</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00238">BlueNRG1_radio.h:238</a></div></div>
<div class="ttc" id="group___radio___t_x_r_x___delay___constants_html_gac55a27e4c3eae59bb1687eb7e8d1fe4b"><div class="ttname"><a href="group___radio___t_x_r_x___delay___constants.html#gac55a27e4c3eae59bb1687eb7e8d1fe4b">RX_DELAY</a></div><div class="ttdeci">#define RX_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00057">BlueNRG1_radio.c:57</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga2458fb0b7e280b21256ac507373202e3"><div class="ttname"><a href="group___radio___exported___functions.html#ga2458fb0b7e280b21256ac507373202e3">RADIO_SetBackToBackTime</a></div><div class="ttdeci">void RADIO_SetBackToBackTime(uint32_t back_to_back_time)</div><div class="ttdoc">Initializes the time between back-to-back radio transmissions. </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00655">BlueNRG1_radio.c:655</a></div></div>
<div class="ttc" id="_blue_n_r_g1__radio_8h_html"><div class="ttname"><a href="_blue_n_r_g1__radio_8h.html">BlueNRG1_radio.h</a></div><div class="ttdoc">This file contains all the functions prototypes for the radio firmware library. </div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga3eba6192d724a8caee1e861f0b161299"><div class="ttname"><a href="group___radio___exported___functions.html#ga3eba6192d724a8caee1e861f0b161299">RADIO_SetEncryptionCount</a></div><div class="ttdeci">void RADIO_SetEncryptionCount(uint8_t StateMachineNo, uint8_t *count_tx, uint8_t *count_rcv)</div><div class="ttdoc">This routine sets the 40-bit receive and transmit packet count, to be used in encryption calculation...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00511">BlueNRG1_radio.c:511</a></div></div>
<div class="ttc" id="struct_blue_trans_struct_html_a178188900fbfecee2d8d72f7e5bd7879"><div class="ttname"><a href="struct_blue_trans_struct.html#a178188900fbfecee2d8d72f7e5bd7879">BlueTransStruct::byte11</a></div><div class="ttdeci">volatile uint8_t byte11</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00178">BlueNRG1_radio.h:178</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a5fbfd8542cc1c516ce42f2b4d35e301c"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a5fbfd8542cc1c516ce42f2b4d35e301c">RadioGlobalParameters_t::hot_ana_config_table_a</a></div><div class="ttdeci">int32_t hot_ana_config_table_a[HOT_ANA_CONFIG_TABLE_LENGTH &gt;&gt;2]</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00208">BlueNRG1_radio.h:208</a></div></div>
<div class="ttc" id="group___radio___private___variables_html_ga7e533a177c7e5e67d8c5560eaf0bbe72"><div class="ttname"><a href="group___radio___private___variables.html#ga7e533a177c7e5e67d8c5560eaf0bbe72">globalParameters</a></div><div class="ttdeci">RadioGlobalParameters_t globalParameters</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00150">BlueNRG1_radio.c:150</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gafcaf55672517d744edf6adf501d1f47a"><div class="ttname"><a href="group___radio___exported___constants.html#gafcaf55672517d744edf6adf501d1f47a">BLE_STATUS_SUCCESS</a></div><div class="ttdeci">#define BLE_STATUS_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00108">BlueNRG1_radio.c:108</a></div></div>
<div class="ttc" id="struct_action_packet_html_a72c9dc6c449768dab54fcad58c5f4d4d"><div class="ttname"><a href="struct_action_packet.html#a72c9dc6c449768dab54fcad58c5f4d4d">ActionPacket::next_false</a></div><div class="ttdeci">ActionPacket * next_false</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00239">BlueNRG1_radio.h:239</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga88a37a2d5f0cbb9c6c502bc687944ac1"><div class="ttname"><a href="group___radio___exported___macros.html#ga88a37a2d5f0cbb9c6c502bc687944ac1">BLUE_STRUCT_PTR_CAST</a></div><div class="ttdeci">#define BLUE_STRUCT_PTR_CAST(x)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00119">BlueNRG1_radio.c:119</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_gae2a4839c8a7daab774258a37e3df89b4"><div class="ttname"><a href="group___radio___exported___macros.html#gae2a4839c8a7daab774258a37e3df89b4">DISABLE_INTERRUPT</a></div><div class="ttdeci">#define DISABLE_INTERRUPT(irqNum)                    </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00117">BlueNRG1_radio.c:117</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga97197e11240838c70c4a4c886c560d33"><div class="ttname"><a href="group___radio___exported___constants.html#ga97197e11240838c70c4a4c886c560d33">ANALOG_HW_OFFSET</a></div><div class="ttdeci">#define ANALOG_HW_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00075">BlueNRG1_radio.h:75</a></div></div>
<div class="ttc" id="structconfig__table__t_html_a7767db1b54602912cc697d0893aad1da"><div class="ttname"><a href="structconfig__table__t.html#a7767db1b54602912cc697d0893aad1da">config_table_t::ls_source</a></div><div class="ttdeci">uint8_t ls_source</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00186">BlueNRG1_radio.h:186</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga9f7616948dad619974922a1559e97b9f"><div class="ttname"><a href="group___radio___exported___constants.html#ga9f7616948dad619974922a1559e97b9f">NULL_0</a></div><div class="ttdeci">#define NULL_0</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00062">BlueNRG1_radio.h:62</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_gaf52e854f55fb7d92917dd2a34d6d4446"><div class="ttname"><a href="group___radio___exported___macros.html#gaf52e854f55fb7d92917dd2a34d6d4446">IS_DELAY_VALID</a></div><div class="ttdeci">#define IS_DELAY_VALID(TIME)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00128">BlueNRG1_radio.c:128</a></div></div>
<div class="ttc" id="group___radio___t_x_r_x___delay___constants_html_ga6179315242df04e1116a135dfa151de0"><div class="ttname"><a href="group___radio___t_x_r_x___delay___constants.html#ga6179315242df04e1116a135dfa151de0">TX_DELAY1</a></div><div class="ttdeci">#define TX_DELAY1</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00056">BlueNRG1_radio.c:56</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga7e0e139a4dff1d1b74e174709b2cb57a"><div class="ttname"><a href="group___radio___exported___functions.html#ga7e0e139a4dff1d1b74e174709b2cb57a">RADIO_EncryptPlainData</a></div><div class="ttdeci">void RADIO_EncryptPlainData(uint8_t *Key, uint8_t *plainData, uint8_t *cypherData)</div><div class="ttdoc">Encrypts plain text data using AES encryption with given input key and 128 bit block size...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l01191">BlueNRG1_radio.c:1191</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga289116058fd4856caadf5b268e82cc42"><div class="ttname"><a href="group___radio___exported___macros.html#ga289116058fd4856caadf5b268e82cc42">UNMASK_INTERRUPTS</a></div><div class="ttdeci">#define UNMASK_INTERRUPTS()</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00133">BlueNRG1_radio.c:133</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gaa9c73a66a9e8f92f1571bc3d8cfeae72"><div class="ttname"><a href="group___radio___exported___constants.html#gaa9c73a66a9e8f92f1571bc3d8cfeae72">RADIO_BUSY_C4</a></div><div class="ttdeci">#define RADIO_BUSY_C4</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00060">BlueNRG1_radio.h:60</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gaac59928c53ed50ef03a0e3d28b011593"><div class="ttname"><a href="group___radio___exported___constants.html#gaac59928c53ed50ef03a0e3d28b011593">SLEEP_TIME_MIN</a></div><div class="ttdeci">#define SLEEP_TIME_MIN</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00100">BlueNRG1_radio.c:100</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga95c8ac582c31dd55944250da123fd563"><div class="ttname"><a href="group___radio___exported___macros.html#ga95c8ac582c31dd55944250da123fd563">MASK_INTERRUPTS</a></div><div class="ttdeci">#define MASK_INTERRUPTS()</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00132">BlueNRG1_radio.c:132</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga8c67a7c5250d640d45265b81d1ace932"><div class="ttname"><a href="group___radio___exported___constants.html#ga8c67a7c5250d640d45265b81d1ace932">TIMING_ERROR_CORRECTION</a></div><div class="ttdeci">#define TIMING_ERROR_CORRECTION</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00076">BlueNRG1_radio.h:76</a></div></div>
<div class="ttc" id="group___radio___action_tag___bit_mask_html_ga1c53ccfc510f2dc5a6572a6768de9041"><div class="ttname"><a href="group___radio___action_tag___bit_mask.html#ga1c53ccfc510f2dc5a6572a6768de9041">RELATIVE</a></div><div class="ttdeci">#define RELATIVE</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00139">BlueNRG1_radio.h:139</a></div></div>
<div class="ttc" id="struct_clk32_context__t_html_a86ba31a37fd0f0def13ffe9ef5e62cad"><div class="ttname"><a href="struct_clk32_context__t.html#a86ba31a37fd0f0def13ffe9ef5e62cad">Clk32Context_t::Time_mT</a></div><div class="ttdeci">uint32_t Time_mT</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00195">BlueNRG1_radio.h:195</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_gad6bc9d340eed7be2063223a721094326"><div class="ttname"><a href="group___radio___exported___functions.html#gad6bc9d340eed7be2063223a721094326">RADIO_SetChannel</a></div><div class="ttdeci">void RADIO_SetChannel(uint8_t StateMachineNo, uint8_t channel, uint8_t channel_increment)</div><div class="ttdoc">This routine sets the channel and the channel increment. Channel and channel increment follows channe...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00604">BlueNRG1_radio.c:604</a></div></div>
<div class="ttc" id="structconfig__table__t_html_a9b390da71a5d40102132cd633a841022"><div class="ttname"><a href="structconfig__table__t.html#a9b390da71a5d40102132cd633a841022">config_table_t::hot_ana_config_table</a></div><div class="ttdeci">uint32_t * hot_ana_config_table</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00185">BlueNRG1_radio.h:185</a></div></div>
<div class="ttc" id="struct_action_packet_html_ad12e2315849cde57ed54a1455669e241"><div class="ttname"><a href="struct_action_packet.html#ad12e2315849cde57ed54a1455669e241">ActionPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00229">BlueNRG1_radio.h:229</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga380d1d6d08ac615b3e02d023d2bd72dd"><div class="ttname"><a href="group___radio___exported___constants.html#ga380d1d6d08ac615b3e02d023d2bd72dd">LS_CRYSTAL_PERIOD</a></div><div class="ttdeci">#define LS_CRYSTAL_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00065">BlueNRG1_radio.c:65</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a883a3e715e0bba5845b3f9ef9e68993a"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a883a3e715e0bba5845b3f9ef9e68993a">RadioGlobalParameters_t::back2backTime</a></div><div class="ttdeci">uint32_t back2backTime</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00201">BlueNRG1_radio.h:201</a></div></div>
<div class="ttc" id="struct_action_packet_html_ac169ee82321d01c2f1e9e8f63b174188"><div class="ttname"><a href="struct_action_packet.html#ac169ee82321d01c2f1e9e8f63b174188">ActionPacket::status</a></div><div class="ttdeci">uint32_t status</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00232">BlueNRG1_radio.h:232</a></div></div>
<div class="ttc" id="group___radio___action_tag___bit_mask_html_ga6a2da3d40b88fb8a436dbf52ae137d2e"><div class="ttname"><a href="group___radio___action_tag___bit_mask.html#ga6a2da3d40b88fb8a436dbf52ae137d2e">TIMER_WAKEUP</a></div><div class="ttdeci">#define TIMER_WAKEUP</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00127">BlueNRG1_radio.h:127</a></div></div>
<div class="ttc" id="struct_action_packet_html_a0469b8c979205e766c56b1952f98eaf5"><div class="ttname"><a href="struct_action_packet.html#a0469b8c979205e766c56b1952f98eaf5">ActionPacket::dataRoutine</a></div><div class="ttdeci">uint8_t(* dataRoutine)(ActionPacket *, ActionPacket *)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00242">BlueNRG1_radio.h:242</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga688ae1692c44833bfe88c044e6be2fe8"><div class="ttname"><a href="group___radio___exported___macros.html#ga688ae1692c44833bfe88c044e6be2fe8">TIME24_DIFF</a></div><div class="ttdeci">#define TIME24_DIFF(a, b)          </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00121">BlueNRG1_radio.c:121</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga9aac37ca22d583608270287965f57ade"><div class="ttname"><a href="group___radio___exported___functions.html#ga9aac37ca22d583608270287965f57ade">RADIO_StopTone</a></div><div class="ttdeci">void RADIO_StopTone(void)</div><div class="ttdoc">This routine starts tone transmission. This API is dedicated for test and destroys context and multis...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l01166">BlueNRG1_radio.c:1166</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_gaa3ced72fc096ddb9f07ce99e5c6dafc6"><div class="ttname"><a href="group___radio___exported___macros.html#gaa3ced72fc096ddb9f07ce99e5c6dafc6">GET_CUR_TIME</a></div><div class="ttdeci">#define GET_CUR_TIME</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00125">BlueNRG1_radio.c:125</a></div></div>
<div class="ttc" id="group___radio___interrupt___status___bits_html_ga8bf03985ac73886ef1bf5021d5e3db34"><div class="ttname"><a href="group___radio___interrupt___status___bits.html#ga8bf03985ac73886ef1bf5021d5e3db34">IRQ_WAKEUP_2</a></div><div class="ttdeci">#define IRQ_WAKEUP_2</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00098">BlueNRG1_radio.h:98</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a943e8f2eaa6b0a06515f77ca7857302e"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a943e8f2eaa6b0a06515f77ca7857302e">RadioGlobalParameters_t::powerUpfirstPacket</a></div><div class="ttdeci">uint8_t powerUpfirstPacket</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00213">BlueNRG1_radio.h:213</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga931ac691eb57757b5f9a1d29ec3d3cc1"><div class="ttname"><a href="group___radio___exported___functions.html#ga931ac691eb57757b5f9a1d29ec3d3cc1">RADIO_SetReservedArea</a></div><div class="ttdeci">void RADIO_SetReservedArea(ActionPacket *p)</div><div class="ttdoc">This routine should be called after writing/modifying an action packet, and before it is executed via...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00734">BlueNRG1_radio.c:734</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga5a337743fb715077dee5b0eae05ea250"><div class="ttname"><a href="group___radio___exported___functions.html#ga5a337743fb715077dee5b0eae05ea250">RADIO_SetTxAttributes</a></div><div class="ttdeci">void RADIO_SetTxAttributes(uint8_t StateMachineNo, uint32_t NetworkID, uint32_t crc_init, uint32_t sca)</div><div class="ttdoc">This routine sets the NetworkID, the CRC init, and the SCA. </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00636">BlueNRG1_radio.c:636</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga8bd93c2e3c728e26e65eea4e597e2ccb"><div class="ttname"><a href="group___radio___exported___constants.html#ga8bd93c2e3c728e26e65eea4e597e2ccb">SUCCESS_0</a></div><div class="ttdeci">#define SUCCESS_0</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00057">BlueNRG1_radio.h:57</a></div></div>
<div class="ttc" id="struct_action_packet_html_ab407922585cd168aa2561d44dbc5f6df"><div class="ttname"><a href="struct_action_packet.html#ab407922585cd168aa2561d44dbc5f6df">ActionPacket::trans_config</a></div><div class="ttdeci">uint8_t trans_config</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00243">BlueNRG1_radio.h:243</a></div></div>
<div class="ttc" id="structconfig__table__t_html_a0cccb361cd710eab41ab2db25bde18bc"><div class="ttname"><a href="structconfig__table__t.html#a0cccb361cd710eab41ab2db25bde18bc">config_table_t::hs_startup_time</a></div><div class="ttdeci">uint16_t hs_startup_time</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00187">BlueNRG1_radio.h:187</a></div></div>
<div class="ttc" id="struct_action_packet_html_abc2f70de235c306b07d819dde07149ff"><div class="ttname"><a href="struct_action_packet.html#abc2f70de235c306b07d819dde07149ff">ActionPacket::timestamp_receive</a></div><div class="ttdeci">uint32_t timestamp_receive</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00233">BlueNRG1_radio.h:233</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_aaefac32894a7c5a1403a916cb5bab916"><div class="ttname"><a href="struct_radio_global_parameters__t.html#aaefac32894a7c5a1403a916cb5bab916">RadioGlobalParameters_t::wakeupTime</a></div><div class="ttdeci">int32_t wakeupTime</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00204">BlueNRG1_radio.h:204</a></div></div>
<div class="ttc" id="struct_blue_trans_struct_html_ad453fb326fd78865a792cf8fc27e8cfc"><div class="ttname"><a href="struct_blue_trans_struct.html#ad453fb326fd78865a792cf8fc27e8cfc">BlueTransStruct::timeout</a></div><div class="ttdeci">volatile uint8_t timeout[3]</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00176">BlueNRG1_radio.h:176</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_gaad89362036826cefbcbb2fec235aabd7"><div class="ttname"><a href="group___radio___exported___functions.html#gaad89362036826cefbcbb2fec235aabd7">RADIO_StartTone</a></div><div class="ttdeci">void RADIO_StartTone(uint8_t RF_channel, uint8_t powerLevel)</div><div class="ttdoc">Starts tone transmission on selected channel. This API is dedicated for test and destroys context and...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l01088">BlueNRG1_radio.c:1088</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gac93f11b82a28e8e0c5e5989f3d717d6d"><div class="ttname"><a href="group___radio___exported___constants.html#gac93f11b82a28e8e0c5e5989f3d717d6d">BLUE_BUSY_NOWAKEUP_T2</a></div><div class="ttdeci">#define BLUE_BUSY_NOWAKEUP_T2</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00065">BlueNRG1_radio.h:65</a></div></div>
<div class="ttc" id="struct_clk32_context__t_html_a809388c80642d67f4a6e861939cae00e"><div class="ttname"><a href="struct_clk32_context__t.html#a809388c80642d67f4a6e861939cae00e">Clk32Context_t::calibr</a></div><div class="ttdeci">struct Clk32Context_t::@0 calibr</div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga643d943280bbd627012250457583c2fa"><div class="ttname"><a href="group___radio___exported___functions.html#ga643d943280bbd627012250457583c2fa">RADIO_SetChannelMap</a></div><div class="ttdeci">void RADIO_SetChannelMap(uint8_t StateMachineNo, uint8_t *chan_remap)</div><div class="ttdoc">This routine sets the channel map. If channel map is not in use, do not use it. The chan_remap consta...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00564">BlueNRG1_radio.c:564</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a0a7602bff5f783f465d9138ab3303154"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a0a7602bff5f783f465d9138ab3303154">RadioGlobalParameters_t::rssiLevel</a></div><div class="ttdeci">uint32_t rssiLevel[2]</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00203">BlueNRG1_radio.h:203</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_gaa7299f02d7dac07cc0cf4502bb530b9d"><div class="ttname"><a href="group___radio___exported___functions.html#gaa7299f02d7dac07cc0cf4502bb530b9d">RADIO_SetEncryptFlags</a></div><div class="ttdeci">void RADIO_SetEncryptFlags(uint8_t StateMachineNo, FunctionalState EncryptFlagTx, FunctionalState EncryptFlagRcv)</div><div class="ttdoc">This routine turns encrypt ON and OFF. When the encryption is enabled, the hardware will add 4 bytes ...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00711">BlueNRG1_radio.c:711</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_ab40abb133a85a0aceb7881100c118715"><div class="ttname"><a href="struct_radio_global_parameters__t.html#ab40abb133a85a0aceb7881100c118715">RadioGlobalParameters_t::hardware_config</a></div><div class="ttdeci">config_table_t hardware_config</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00210">BlueNRG1_radio.h:210</a></div></div>
<div class="ttc" id="struct_action_packet_html_accecaab64bd88e331a4972fc2ca91205"><div class="ttname"><a href="struct_action_packet.html#accecaab64bd88e331a4972fc2ca91205">ActionPacket::StateMachineNo</a></div><div class="ttdeci">uint8_t StateMachineNo</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00222">BlueNRG1_radio.h:222</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_gae9d83dcfff9877e35fa7286aff455171"><div class="ttname"><a href="group___radio___exported___functions.html#gae9d83dcfff9877e35fa7286aff455171">RADIO_CrystalCheck</a></div><div class="ttdeci">void RADIO_CrystalCheck(void)</div><div class="ttdoc">This function performs the automatic calibration procedure on the BLE period_slow hardware register w...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00900">BlueNRG1_radio.c:900</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_ga2f8e0f97ab25f91b38ccbebb1e5a98e0"><div class="ttname"><a href="group___radio___exported___macros.html#ga2f8e0f97ab25f91b38ccbebb1e5a98e0">IS_STATE_VALID</a></div><div class="ttdeci">#define IS_STATE_VALID(STATEMACHINE_NO)</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00122">BlueNRG1_radio.c:122</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga1037db33ae8dcd93ee04f6ec9dea0f2b"><div class="ttname"><a href="group___radio___exported___functions.html#ga1037db33ae8dcd93ee04f6ec9dea0f2b">RADIO_MakeActionPacketPending</a></div><div class="ttdeci">uint8_t RADIO_MakeActionPacketPending(ActionPacket *p)</div><div class="ttdoc">This routine should be called for the first actionPacket that needs to be scheduled on the radio...</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00823">BlueNRG1_radio.c:823</a></div></div>
<div class="ttc" id="struct_clk32_context__t_html_a10910fc520184f55ece9f48ea1c6aba5"><div class="ttname"><a href="struct_clk32_context__t.html#a10910fc520184f55ece9f48ea1c6aba5">Clk32Context_t::started_flag</a></div><div class="ttdeci">uint32_t started_flag</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00196">BlueNRG1_radio.h:196</a></div></div>
<div class="ttc" id="struct_blue_trans_struct_html_aa976e8b935a5495ab8ea3a2fe680a6ac"><div class="ttname"><a href="struct_blue_trans_struct.html#aa976e8b935a5495ab8ea3a2fe680a6ac">BlueTransStruct::byte10</a></div><div class="ttdeci">volatile uint8_t byte10</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00177">BlueNRG1_radio.h:177</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a0fe668fcc510d70104a2c0240ef9ed1f"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a0fe668fcc510d70104a2c0240ef9ed1f">RadioGlobalParameters_t::Clk32Context</a></div><div class="ttdeci">Clk32Context_t Clk32Context</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00209">BlueNRG1_radio.h:209</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga1f66e54999d31d40a4593b42b6599560"><div class="ttname"><a href="group___radio___exported___constants.html#ga1f66e54999d31d40a4593b42b6599560">STATEMACHINE_COUNT</a></div><div class="ttdeci">#define STATEMACHINE_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00073">BlueNRG1_radio.h:73</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_gac78fcbc1515a6ce6196a4b10822dc755"><div class="ttname"><a href="group___radio___exported___functions.html#gac78fcbc1515a6ce6196a4b10822dc755">RADIO_GetStatus</a></div><div class="ttdeci">uint8_t RADIO_GetStatus(uint32_t *time)</div><div class="ttdoc">This routine returns the status of the Radio whether it is busy or not. If it is busy, the time argument will be filled with absolute time value of next radio activity. User can use this value (in comparison with current time) to check that how long it is far to force the device to sleep or not. Note: when Timer2 is on schedule, time value is not absolute time. </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l01034">BlueNRG1_radio.c:1034</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_a4feb2d1d5155073bf7fb8da59071e8d6"><div class="ttname"><a href="struct_radio_global_parameters__t.html#a4feb2d1d5155073bf7fb8da59071e8d6">RadioGlobalParameters_t::period_slow_patch</a></div><div class="ttdeci">uint16_t period_slow_patch</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00205">BlueNRG1_radio.h:205</a></div></div>
<div class="ttc" id="group___radio___interrupt___status___bits_html_ga0d057d9fa4600e7c3b8c136c13a4bf1b"><div class="ttname"><a href="group___radio___interrupt___status___bits.html#ga0d057d9fa4600e7c3b8c136c13a4bf1b">BIT_TIME_OVERRUN</a></div><div class="ttdeci">#define BIT_TIME_OVERRUN</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00096">BlueNRG1_radio.h:96</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html"><div class="ttname"><a href="struct_radio_global_parameters__t.html">RadioGlobalParameters_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00200">BlueNRG1_radio.h:200</a></div></div>
<div class="ttc" id="group___radio___private___functions_html_gad7de06cdb1d3aeaddf1d529d2ed7b7d1"><div class="ttname"><a href="group___radio___private___functions.html#gad7de06cdb1d3aeaddf1d529d2ed7b7d1">WEAK_FUNCTION</a></div><div class="ttdeci">WEAK_FUNCTION(void RADIO_TimerOverrunCallback(void))</div><div class="ttdoc">Weak definition of RADIO_TimerOverrunCallback. </div></div>
<div class="ttc" id="group___radio___t_x_r_x___delay___constants_html_ga3f3816567a2f513dd0e1f9eb17992fb2"><div class="ttname"><a href="group___radio___t_x_r_x___delay___constants.html#ga3f3816567a2f513dd0e1f9eb17992fb2">TX_DELAY</a></div><div class="ttdeci">#define TX_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00055">BlueNRG1_radio.c:55</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gad3a2344fcb503af2ef601fb6dad1ef50"><div class="ttname"><a href="group___radio___exported___constants.html#gad3a2344fcb503af2ef601fb6dad1ef50">BLUE_SLEEP_ENABLE</a></div><div class="ttdeci">#define BLUE_SLEEP_ENABLE</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00097">BlueNRG1_radio.c:97</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga6a0bd3c571fcc0ed3d6b3d7cad68ed92"><div class="ttname"><a href="group___radio___exported___constants.html#ga6a0bd3c571fcc0ed3d6b3d7cad68ed92">SCA_DEFAULTVALUE</a></div><div class="ttdeci">#define SCA_DEFAULTVALUE</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00071">BlueNRG1_radio.h:71</a></div></div>
<div class="ttc" id="struct_radio_global_parameters__t_html_adc7cacd68ff991c747bbeb5db3c81de2"><div class="ttname"><a href="struct_radio_global_parameters__t.html#adc7cacd68ff991c747bbeb5db3c81de2">RadioGlobalParameters_t::period_global_debug</a></div><div class="ttdeci">int32_t period_global_debug</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00207">BlueNRG1_radio.h:207</a></div></div>
<div class="ttc" id="group___radio___exported___macros_html_gaeb635962a538ee748fe8d6f641acbb90"><div class="ttname"><a href="group___radio___exported___macros.html#gaeb635962a538ee748fe8d6f641acbb90">IFR</a></div><div class="ttdeci">#define IFR</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00126">BlueNRG1_radio.c:126</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gae1fce04f69ce00bbbc086f36d7627a3c"><div class="ttname"><a href="group___radio___exported___constants.html#gae1fce04f69ce00bbbc086f36d7627a3c">LS_CRYSTAL_FREQ</a></div><div class="ttdeci">#define LS_CRYSTAL_FREQ</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00066">BlueNRG1_radio.c:66</a></div></div>
<div class="ttc" id="group___radio___exported___functions_html_ga7786f7a54b3962c3b26eccc25c7a1585"><div class="ttname"><a href="group___radio___exported___functions.html#ga7786f7a54b3962c3b26eccc25c7a1585">RADIO_Init</a></div><div class="ttdeci">void RADIO_Init(uint16_t hs_startup_time, uint8_t low_speed_osc, uint32_t *hot_table, FunctionalState whitening)</div><div class="ttdoc">Initializes the radio. </div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00959">BlueNRG1_radio.c:959</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gab988a6b20c8af806c8fdd999444a76b9"><div class="ttname"><a href="group___radio___exported___constants.html#gab988a6b20c8af806c8fdd999444a76b9">BLUE_IDLE_0</a></div><div class="ttdeci">#define BLUE_IDLE_0</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00063">BlueNRG1_radio.h:63</a></div></div>
<div class="ttc" id="group___radio___action_tag___bit_mask_html_gaaf475ca5af00817f38dbe270a0f02b54"><div class="ttname"><a href="group___radio___action_tag___bit_mask.html#gaaf475ca5af00817f38dbe270a0f02b54">INC_CHAN</a></div><div class="ttdeci">#define INC_CHAN</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00133">BlueNRG1_radio.h:133</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga980a813712caa7e8ccec602e6eeef113"><div class="ttname"><a href="group___radio___exported___constants.html#ga980a813712caa7e8ccec602e6eeef113">TIMESTAMP_POSITION_LASTBIT</a></div><div class="ttdeci">#define TIMESTAMP_POSITION_LASTBIT</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00068">BlueNRG1_radio.h:68</a></div></div>
<div class="ttc" id="group___radio___action_tag___bit_mask_html_gac72f68940a0e0af035539b58b53983e7"><div class="ttname"><a href="group___radio___action_tag___bit_mask.html#gac72f68940a0e0af035539b58b53983e7">TIMESTAMP_POSITION</a></div><div class="ttdeci">#define TIMESTAMP_POSITION</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00145">BlueNRG1_radio.h:145</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga6fe3144e54ea208d7f2cd395412fbd3e"><div class="ttname"><a href="group___radio___exported___constants.html#ga6fe3144e54ea208d7f2cd395412fbd3e">TIMESTAMP_POSITION_ACCESSADDRESS</a></div><div class="ttdeci">#define TIMESTAMP_POSITION_ACCESSADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00067">BlueNRG1_radio.h:67</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_ga0e1b36244cb660ca92614cdaf3bc13e9"><div class="ttname"><a href="group___radio___exported___constants.html#ga0e1b36244cb660ca92614cdaf3bc13e9">TIMER1_TIMER_MASK</a></div><div class="ttdeci">#define TIMER1_TIMER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00094">BlueNRG1_radio.c:94</a></div></div>
<div class="ttc" id="struct_action_packet_html_a56d928dbd53eddd0c870766d61c8dbb9"><div class="ttname"><a href="struct_action_packet.html#a56d928dbd53eddd0c870766d61c8dbb9">ActionPacket::WakeupTime</a></div><div class="ttdeci">uint32_t WakeupTime</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8h_source.html#l00225">BlueNRG1_radio.h:225</a></div></div>
<div class="ttc" id="group___radio___exported___constants_html_gabb4868492f074c98ebe79096ec8dac03"><div class="ttname"><a href="group___radio___exported___constants.html#gabb4868492f074c98ebe79096ec8dac03">IRQBLUE</a></div><div class="ttdeci">#define IRQBLUE</div><div class="ttdef"><b>Definition:</b> <a href="_blue_n_r_g1__radio_8c_source.html#l00105">BlueNRG1_radio.c:105</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2018 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
